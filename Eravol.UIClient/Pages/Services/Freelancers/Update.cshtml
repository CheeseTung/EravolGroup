@page
@model Eravol.UIClient.Pages.Services.Freelancers.UpdateModel
@using Eravol.WebApi.Data.Models;
@using Eravol.WebApi.ViewModels.Services.Freelancers;

@{
	List<Category> Categories = Model.Categories;
	List<ServiceStatus> ServiceStatuses = Model.ServiceStatuses;
	CreateServicesRequest CreateRequest = Model.CreateServicesRequest;
	Service? service = Model.Service;
	List<ServiceImage>? serviceImages = Model.serviceImages;
	ServiceImage? thumbnail = Model.thumbnail;
	string? token = Model.token;
}

<head>
	<link rel="stylesheet" href="~/css/themify-icons.css">
	<link rel="stylesheet" href="~/css/basictable.css">
	<link rel="stylesheet" href="~/css/dashboard.css">
	<link rel="stylesheet" href="~/css/dbresponsive.css">
	<script src="~/js/vendor/modernizr-2.8.3-respond-1.4.2.min.js"></script>
</head>

<!--Main Start-->
<main id="wt-main" class="wt-main wt-haslayout">
	
	<!--Register Form Start-->
	<section class="wt-haslayout">
		<div class="row">
			<div class="col-xs-12 col-sm-12 col-md-12 col-lg-8 col-xl-9">
				<div class="wt-haslayout wt-dbsectionspace">
					<div class="wt-dashboardbox wt-dashboardtabsholder">
						<div class="wt-dashboardboxtitle">
							<h2>Create new Service</h2>
						</div>
						<div class="wt-dashboardtabs">
							<ul class="wt-tabstitle nav navbar-nav">
								<li class="nav-item">
									<a class="active" data-toggle="tab" href="#wt-skills">Service Information</a>
								</li>
								<li class="nav-item"><a data-toggle="tab" href="#wt-education">Pakages</a></li>
							</ul>
						</div>
						<div class="wt-tabscontent tab-content">
							<div class="wt-personalskillshold tab-pane active fade show" id="wt-skills">
								<div class="wt-yourdetails wt-tabsinfo">
									<div class="wt-tabscontenttitle">
										<h2>Your Details</h2>
									</div>
									<form class="wt-formtheme wt-userform" method="post">
										<fieldset>
											<div class="form-group">
												<input type="text" id="serviceTitle_Js" name="serviceTitle" value="@service.ServiceTitle" class="form-control" placeholder="Enter Service title Here">
											</div>
											<div class="form-group">
												<input type="hidden" id="token_Js" name="token" value="@token">
												<input type="hidden" id="serviceCode_Js" value="@service.ServiceCode"/>
											</div>
											
											<div class="form-group form-group-half">
												<span class="wt-select">
													<select required id="categoryId_Js" name="categoryId">

														<option value="">Select Category</option>
														@foreach (var item in Categories)
														{
															if (item.CategoryId == service.CategoryId)
															{
																<option value="@item.CategoryId" selected>@item.CategoryName</option>
															}
															else
															{
																<option value="@item.CategoryId">@item.CategoryName</option>
															}
														}
	
													</select>
												</span>
											</div>
											
											<div class="form-group form-group-half">
												<span class="wt-select">
													<select required id="serviceStatusId_Js" name="serviceStatusId">
														<option value="">Select Service Status</option>
														@foreach (var item in ServiceStatuses)
														{
															if (item.ServiceStatusId == service.ServiceStatusId)
															{
																<option value="@item.ServiceStatusId" selected>@item.ServiceStatusName</option>
															}
															else
															{
																<option value="@item.ServiceStatusId">@item.ServiceStatusName</option>
															}
															
														}
													</select>
												</span>
											</div>

											<div class="form-group form-group-half">
												<span class="wt-select">
													<select id="price-type" name="priceType">
														@if (service.PriceType == "fixPrice")
														{
															<option value="fixPrice" selected>Fix Price</option>
														} else
														{
															<option value="fixPrice">Fix Price</option>
														}

														@if (service.PriceType == "hourPrice")
														{
															<option value="hourPrice" selected>Hour Price</option>
														} else
														{
															<option value="hourPrice">Hour Price</option>
														}
														
													</select>
												</span>
											</div>

											<div class="form-group form-group-half">
												<input type="number" name="price" value="@service.Price" id="price-amount" class="form-control" placeholder="Your Service Price ($)">
											</div>
											
											<div class="form-group">
												<textarea id="serviceIntro_Js" name="serviceIntro" class="form-control" placeholder="Service Introduction">@service.ServiceIntro</textarea>
											</div>
											
											<div class="form-group">
												<textarea id="serviceDetails_Js" name="serviceDetails" class="form-control" placeholder="Service Details">@service.ServiceDetails</textarea>
                                            </div>

                                        </fieldset>
                                    </form>
								</div>
								<div class="wt-profilephoto wt-tabsinfo">
									<div class="wt-tabscontenttitle">
										<h2>Services Photo</h2>
									</div>
									<div class="wt-profilephotocontent">
										<div class="wt-description">
											<p>Add multiple service images and click to choose thumbnail image as you like.</p>
										</div>
										<form class="wt-formtheme wt-formprojectinfo wt-formcategory" enctype="multipart/form-data">
											<fieldset>
												<div class="form-group form-group-label">
													<div class="wt-labelgroup">
														<label for="filep">
															<span class="wt-btn">Select Files</span>
															<input type="file" name="serviceImage" id="filep" multiple accept=".jpg, .jpeg, .png">
														</label>
														<span>Drop files here to upload</span>
														<em class="wt-fileuploading">Uploading<i class="fa fa-spinner fa-spin"></i></em>
													</div>
												</div>
                                                <div class="form-group">
                                                    <ul class="wt-attachfile wt-attachfilevtwo" id="serviceImgContainer">
														@if (serviceImages != null)
														{
															@foreach (var image in serviceImages)
															{
																if (!image.isThumbnail)
																{
																	<li class="wt-uploadingholder" id="div-img_display-@image.ImageName">
																		<div class="wt-uploadingbox">
																			<div class="wt-designimg">
																				<input id="demoq-@image.ServiceImgageId" class="input-serviceimg_value" type="radio" value="@image.ImageName" checked="">
																				<label for="demoq-@image.ServiceImgageId"><img src=@($"https://localhost:7259/api/Images/{image.ImageName}") alt="img description" class="img-serviceImgs_display"></label>
																			</div>
																			<div class="wt-uploadingbar">
																				<span class="uploadprogressbar"></span>

																				<em>File size: @Math.Round(((double)image.ServiceImageSize / 1024), 2) kb<a href="javascript:void(0);" onclick="deleteServiceImage('@image.ImageName')" class="lnr lnr-cross btn-serviceImg_delete"></a></em>
																			</div>
																		</div>
																	</li>
																}
															}
														}
														
                                                        
                                                    </ul>
                                                </div>
											</fieldset>
										</form>
									</div>
								</div>
								<div class="wt-bannerphoto wt-tabsinfo">
									<div class="wt-tabscontenttitle">
										<h2>Banner Photo</h2>
									</div>
									<div class="wt-profilephotocontent">
										<div class="wt-description">
											<p>Add your Service Thumbnail.</p>
										</div>
										<form class="wt-formtheme wt-formprojectinfo wt-formcategory" enctype="multipart/form-data">
											<fieldset>
												<div class="form-group form-group-label">
													<div class="wt-labelgroup">
														<label for="filew">
															<span class="wt-btn">Select Files</span>
															<input type="file" name="file" id="filew" accept=".jpg, .jpeg, .png">
														</label>
														<span>Drop files here to upload</span>
														<em class="wt-fileuploading">Uploading<i class="fa fa-spinner fa-spin"></i></em>
													</div>
												</div>
												<div class="form-group">
													<ul class="wt-attachfile wt-attachfilevtwo" id="service-thumbnail-img">
														@if (thumbnail != null)
														{
															<li class="wt-uploadingholder" id="div-img_display-@thumbnail.ImageName">
																<div class="wt-uploadingbox">
																	<div class="wt-designimg">
																		<input id="demoq" type="radio" name="employees" value="company" checked="">
																		<label for="demoq"><img src=@($"https://localhost:7259/api/Images/serviceBanner/{thumbnail.ServiceCode}") alt="img description"><i class="fa fa-check"></i></label>
																	</div>
																	<div class="wt-uploadingbar">
																		<span class="uploadprogressbar"></span>
																		<span>Banner Photo.jpg</span>
																		<em>
																			File size: @Math.Round(((double)thumbnail.ServiceImageSize / 1024), 2) kb
																			<a href="javascript:void(0);" onclick="deleteServiceImage('@thumbnail.ImageName')" class="lnr lnr-cross btn-serviceImg_delete"></a>
																		</em>
																	</div>
																</div>
															</li>
														}
													</ul>
												</div>
											</fieldset>
										</form>
									</div>
								</div>
								
							</div>
							
						</div>
					</div>
				</div>
				<div class="wt-updatall" id="updateServiceBtn_Js">
					<i class="ti-announcement"></i>
					<span>Update all the latest changes made by you, by just clicking on “Save &amp; Continue” button.</span>
					<button class="wt-btn">Save &amp; Update</button>
				</div>
			</div>
			<div class="col-xs-12 col-sm-12 col-md-6 col-lg-4 col-xl-3">
				<div class="wt-haslayout wt-dbsectionspace wt-codescansidebar">
					<div class="tg-authorcodescan wt-codescanholder">
						<figure class="tg-qrcodeimg">
							<img src="~/images/qrcode.png" alt="img description">
						</figure>
						<div class="tg-qrcodedetail">
							<span class="lnr lnr-laptop-phone"></span>
							<div class="tg-qrcodefeat">
								<h3>Scan with your <span>Smart Phone </span> To Get It Handy.</h3>
							</div>
						</div>
						<div class="wt-codescanicons">
							<span>Share Your Profile</span>
							<ul class="wt-socialiconssimple">
								<li class="wt-facebook"><a href="javascript:void(0);"><i class="fa fa-facebook-f"></i></a></li>
								<li class="wt-twitter"><a href="javascript:void(0);"><i class="fab fa-twitter"></i></a></li>
								<li class="wt-linkedin"><a href="javascript:void(0);"><i class="fab fa-linkedin-in"></i></a></li>
								<li class="wt-clone"><a href="javascript:void(0);"><i class="far fa-clone"></i></a></li>
							</ul>
						</div>
					</div>
					<div class="wt-companyad">
						<figure class="wt-companyadimg"><img src="~/images/add-img.jpg" alt="img description"></figure>
						<span>Advertisement  255px X 255px</span>
					</div>
				</div>
			</div>
		</div>
	</section>
	<!--Register Form End-->
</main>
<!--Main End-->	

@section Scripts {
    <script src="~/js/services/updateservicescript.js"></script>
	<script src="https://cdn.tiny.cloud/1/xb41srbe20jwghubvngbzc8fnb6m02d3nomv82zvyw5srhia/tinymce/6/tinymce.min.js" referrerpolicy="origin"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.5/jquery.validate.min.js" integrity="sha512-rstIgDs0xPgmG6RX1Aba4KV5cWJbAMcvRCVmglpam9SoHZiUCyQVDdH2LPlxoHtrv17XWblE/V/PP+Tr04hbtA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

	<script>
		tinymce.init({
			selector: '#serviceDetails_Js',
			plugins: 'anchor autolink charmap codesample emoticons image link lists media searchreplace table visualblocks wordcount checklist mediaembed casechange export formatpainter pageembed linkchecker a11ychecker tinymcespellchecker permanentpen powerpaste advtable advcode editimage tinycomments tableofcontents footnotes mergetags autocorrect typography inlinecss',
			toolbar: 'undo redo | blocks fontfamily fontsize | bold italic underline strikethrough | link image media table mergetags | addcomment showcomments | spellcheckdialog a11ycheck typography | align lineheight | checklist numlist bullist indent outdent | emoticons charmap | removeformat',
			tinycomments_mode: 'embedded',
			tinycomments_author: 'Author name',
			mergetags_list: [
				{ value: 'First.Name', title: 'First Name' },
				{ value: 'Email', title: 'Email' },
			]
		});
	</script>
}